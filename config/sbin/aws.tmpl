#!/usr/bin/env bash

# ---------------------------------------------------------------------
# This script is autogenerated by the container startup script (gomplate)
# Purpose: wrap the AWS CLI to ensure it uses the correct config/credentials
# ---------------------------------------------------------------------

set -euo pipefail

# Run AWS CLI in a subshell to ensure exported environment variables
# (config/credentials) don't persist after execution.

(

	export AWS_CONFIG_FILE="{{ .Env.AWS_CONFIG_FILE }}"
	export AWS_SHARED_CREDENTIALS_FILE="{{ .Env.AWS_SHARED_CREDENTIALS_FILE }}"

	# Run the real AWS CLI binary
	exec /usr/bin/aws "$@"

)
